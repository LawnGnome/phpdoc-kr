<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision: 1.1 $ -->
<!-- EN-Revision: 1.26 -->
<chapter id="faq.using">
  <title>PHP 사용하기</title>
  <titleabbrev>PHP 사용하기</titleabbrev>

  <para>
   이 섹션은 PHP스크립트를 작성할때 직면할수 있는 매우 일반적인
   에러를 정리했습니다.
  </para>

  <qandaset>
   <qandaentry id="faq.using.anyform">
    <question>
     <para>
      폼으로부터 데이터를 제어할수 있는 PHP스크립트를 작성하려합니다.
      POST 메쏘드에서 사용가능한 변수를 알 수 있을까요?
     </para>
    </question>
    <answer>
     <para>
      PHP는 많은 <link linkend="language.variables.predefined">미리 정의된 변수들</link>
      을 갖습니다. 슈퍼 글로벌(superglobal)변수인 <varname>$_POST</varname>처럼요.
      <varname>$_POST</varname>변수는 포스팅된 모든 변수의 연관배열이기 때문에 이 변수로
      루프를 돌릴수도 있다. 예를 들어서 간단하게 <link linkend="control-structures.foreach">foreach</link>로
      루프를 돌린다고 하면 <function>empty</function>함수 값을 체크하고 그 값을 출력하면된다.
      <programlisting role="php">
<![CDATA[
<?php
$empty = $post = array();
foreach ($_POST as $varname => $varvalue) {
    if (empty($varvalue)) {
        $empty[$varname] = $varvalue;
    } else {
        $post[$varname] = $varvalue;
    }
}

print "<pre>";
if (empty($empty)) {
    print "None of the POSTed values are empty, posted:\n";
    var_dump($post);
} else {
    print "We have " . count($empty) . " empty values\n";
    print "Posted:\n"; var_dump($post);
    print "Empty:\n";  var_dump($empty);
    exit;
}
?>
]]>
      </programlisting>
     </para>
     
     &note.superglobals;

    </answer>
   </qandaentry>

   <qandaentry id="faq.using.addslashes">
    <question>
     <para>
      작은따옴표(')에 역슬래쉬를 앞에(\') 붙여줄 필요가 있습니다.
      이와 같은 일은 어떻게 정규표현식(regular expression)으로 처리할수
      있을까요? 그리고 "를 \"로, \를 \\로 변환하고 싶습니다.
     </para>
    </question>
    <answer>
     <para>
      <function>addslashes</function>함수로 이와 같은 일을 처리할수있습니다.
      <function>mysql_escape_string</function>함수도 참고하십시오.
      또한 <function>stripslashes</function>함수로 역슬래쉬를 벗길 수 있습니다.
     </para>

     &note.magicquotes.gpc;

    </answer>
   </qandaentry>
   
   <qandaentry id="faq.using.stripslashes">
    <question>
     <para>
      All my " turn into \" and my ' turn into \', how do I get rid of all 
      these unwanted backslashes?  How and why did they get there?
      "은 \"으로, '는 \'으로 변경이 되어있습니다. 어떻게하면 이런 원치않는
      역슬래쉬를 제거할수 있을까요? 어떻게 그리고 왜 이런 역슬래쉬가 생긴거죠?
     </para>
    </question>
    <answer>
     <para>
      <function>stripslashes</function>함수로 이 <type>string</type>에서 이런
      역슬래쉬를 벗길수가 있습니다. 이런 마술적인 역슬래쉬가 존재하는 이유는
      <link linkend="ini.magic-quotes-gpc">magic_quotes_gpc</link>옵션이 활성화되어
      있기 때문입니다.
     </para>
     
     &note.magicquotes.gpc;
     
    </answer>
   </qandaentry>   

   <qandaentry id="faq.using.wrong-order">
    <question>
     <para>
      다음과 같은 처리를 할때, 출력이 잘못된 순서로 됩니다:
     <programlisting role="php">
<![CDATA[
<?php
function myfunc($argument)
{
    echo $argument + 10;
}
$variable = 10;
echo "myfunc($variable) = " . myfunc($variable);
?>
]]>
    </programlisting>
     무엇이 잘못된건가요?
     </para>
    </question>
    <answer>
     <para>
      이 함수의 결과를 사용하기 위해서는 (위 예처럼 다른 스트링과 합치는)
      <function>echo</function> 함수대신에 <function>return</function>를
      사용해야 합니다.
     </para>
    </answer>
   </qandaentry>

   <qandaentry id="faq.using.newlines">
    <question>
     <para>
      헤이, 새줄(newline)이 왜 안생기나요?
      <programlisting role="php">
<![CDATA[
<pre>
<?php echo "This should be the first line."; ?>
<?php echo "This should show up after the new line above."; ?>
</pre>
]]>
      </programlisting>
     </para>
    </question>
    <answer>
     <para>
      PHP에서는 코드 블럭이 "?&gt;" 나 "?&gt;\n"로 끝날수 있습니다.
      그래서 위 예에서 문장은 한줄로 출력이 될것입니다. 왜냐하면
      블럭의 끝에 새줄표시(newline)를 빠뜨렸기 때문이요. 이와 같은 이유로
      새줄쓰기를 하려면 각 블럭의 끝에 새줄표시(newline)를 해줘야합니다.
     </para>
     <para>
      왜 이와같은 일을 할까요? 왜냐하면 일반적인 HTML을 만들때,
      새줄을 쓰지 않고 매우 긴 줄을 만들거나 이런 효과를 이용해서 
      읽을수 없는 소스 페이지 를 만들어야 할때도 있기 때문이고,이는 당신의 삶을 
      좀더 안락하게 해줍니다.
     </para>
    </answer>
   </qandaentry>

   <qandaentry id="faq.using.headers-sent">
    <question>
     <para>
      'Warning: Cannot send session cookie - headers already
      sent...' 나  'Cannot add header information - headers already sent...'같은
      메시지를 봤습니다.
     </para>
    </question>
    <answer>
     <para>
      <function>header</function>함수, <function>setcookie</function>함수, 
      <link linkend="ref.session">세션 함수</link>는 헤더에 출력을 합니다.
      그러나 헤더는 모든 다른 컨텐트 전에 와야 합니다. 이 함수를 사용하기 전에
      어떤 출력(HTML같은)도 있어서는 안됩니다.  <function>headers_sent</function>함수가
      스크립트에서 이미 헤더를 보냈는지 체크해줍니다.
      <link linkend="ref.outcontrol">Output Control Functions</link>도 참고하세요.
     </para>
    </answer>
   </qandaentry>

   <qandaentry id="faq.using.header">
    <question>
     <para>
      I need to access information in the request header directly. 
      How can I do this?
     </para>
    </question>
    <answer>
     <para>
      The <function>getallheaders</function> function will do this if 
      you are running PHP as an Apache module. So, the following bit
      of code will show you all the request headers:
      <programlisting role="php">
<![CDATA[
<?php
$headers = getallheaders();
foreach ($headers as $name => $content) {
    echo "headers[$name] = $content<br>\n";
}
?>
]]>
      </programlisting>
     </para>
     <para>
      See also 
      <function>apache_lookup_uri</function>,
      <function>apache_response_headers</function>, and
      <function>fsockopen</function>
     </para>
    </answer>
   </qandaentry>

   <qandaentry id="faq.using.authentication">
    <question>
     <para>
      When I try to use authentication with IIS I get 'No Input file specified'.
     </para>
    </question>
    <answer>
     <para>
      The security model of IIS is at fault here. This is a problem
      common to all CGI programs running under IIS. A workaround is
      to create a plain HTML file (not parsed by PHP) as the entry page
      into an authenticated directory. Then use a META tag to redirect
      to the PHP page, or have a link to the PHP page. PHP will
      then recognize the authentication correctly. With the ISAPI
      module, this is not a problem. This should not effect other
      NT web servers. For more information, see: 
      <ulink url="&url.iis;">&url.iis;</ulink> and the manual
      section on <link linkend="features.http-auth">HTTP Authentication
      </link>.
     </para>
    </answer>
   </qandaentry>

   <qandaentry id="faq.using.netscape">
    <question>
     <para>
      My PHP script works on IE and Lynx, but on Netscape some of
      my output is missing. When I do a "View Source" I see the 
      content in IE but not in Netscape.
     </para>
    </question>
    <answer>
     <para>
      Netscape is more strict regarding html tags (such as tables) then 
      IE.  Running your html output through a html validator, such as 
      <ulink url="&url.w3.validator;">validator.w3.org</ulink>, might 
      be helpful.  For example, a missing &lt;/table&gt; might cause this.
     </para>
     <para>
      Also, both IE and Lynx ignore any NULs (<literal>\0</literal>) in 
      the HTML stream, Netscape does not.  The best way to check for this is 
      to compile the <link linkend="features.commandline">command line</link> version of 
      PHP (also known as the CGI version) and run your script from the
      command line.  In *nix, pipe it through <literal>od -c</literal> and look 
      for any <literal>\0</literal> characters.  If you are on Windows you need 
      to find an editor or some other program that lets you look at binary files.  
      When Netscape sees a NUL in a file it will typically not output anything 
      else on that line whereas both IE and Lynx will. 
     </para>
    </answer>
   </qandaentry>

   <qandaentry id="faq.using.mixml">
    <question>
     <para>
      How am I supposed to mix XML and PHP? It complains 
      about my &lt;?xml tags!
     </para>
    </question>
    <answer>
     <para>
      In order to embed &lt;?xml straight into your PHP code, you'll have to turn off
      short tags by having the PHP directive 
      <link linkend="ini.short-open-tag">short_open_tags</link> set to 
      <literal>0</literal>.  You cannot set this directive with <function>
      ini_set</function>.  Regardless of <link linkend="ini.short-open-tag">
      short_open_tags</link> being on or off, you can do something like:
      <literal>&lt;?php echo '&lt;?xml'; ?&gt;</literal>.  The default
      for this directive is on.
     </para>
    </answer>
   </qandaentry>

   <qandaentry id="faq.using.editor">
    <question>
     <para>
      How can I use PHP with FrontPage or some other HTML editor
      that insists on moving my code around?
     </para>
    </question>
    <answer>
     <para>
      One of the easiest things to do is to enable using ASP tags in your
      PHP code. This allows you to use the ASP-style &lt;% and %&gt; code
      delimiters. Some of the popular HTML editors handle those more
      intelligently (for now). To enable the ASP-style tags, you need
      to set the <link linkend="ini.asp-tags">asp_tags</link>
      &php.ini; variable, or use the 
      appropriate Apache directive.
     </para>
    </answer>
   </qandaentry>

   <qandaentry id="faq.using.variables">
    <question>
     <para>
      Where can I find a complete list of variables are available to me 
      in PHP?
     </para>
    </question>
    <answer>
     <para>
      Read the manual page on <link linkend="language.variables.predefined">
      predefined variables</link> as it includes a partial list of predefined
      variables available to your script.  A complete list of available
      variables (and much more information) can be seen by calling the 
      <function>phpinfo</function> function.  Be sure to read the manual 
      section on <link linkend="language.variables.external">variables from 
      outside of PHP</link> as it describes common scenerios for 
      external variables, like from a HTML form, a Cookie, and the URL.
     </para>
     
     &note.registerglobals;

    </answer>
   </qandaentry>

   <qandaentry id="faq.using.freepdf">
    <question>
     <para>
      How can I generate PDF files without using the non-free and 
      commercial libraries <link linkend="ref.cpdf">ClibPDF</link> and 
      <link linkend="ref.pdf">PDFLib</link>?  I'd like something that's 
      free and doesn't require external PDF libraries.
     </para>
    </question>
    <answer>
     <para>
      There are a few alternatives written in PHP such as 
      <ulink url="&url.pdf.ros;">&url.pdf.ros;</ulink>, 
      <ulink url="&url.pdf.fpdf;">&url.pdf.fpdf;</ulink>, 
      <ulink url="&url.pdf.pdf4php;">&url.pdf.pdf4php;</ulink>, and 
      <ulink url="&url.pdf.phppdflib;">&url.pdf.phppdflib;</ulink>.
      There is also the <ulink url="&url.pdf.panda;">Panda</ulink> module.
     </para>
    </answer>
   </qandaentry>

   <qandaentry id="faq.using.cgi-vars">
    <question>
     <para>
      I'm trying to access one of the standard CGI
      variables (such as $DOCUMENT_ROOT or $HTTP_REFERER) in a user-defined
      function, and it can't seem to find it. What's wrong?
     </para>
    </question>
    <answer>
     <para>
      It's important to realize that the PHP directive <link
      linkend="ini.register-globals">register_globals</link> also affects
      server and environment variables.  When register_globals = off (the
      default is off since PHP 4.2.0), <varname>$DOCUMENT_ROOT</varname>
      will not exist. Instead, use <varname>$_SERVER['DOCUMENT_ROOT']
      </varname>.  If register_globals = on then the variables
      <varname>$DOCUMENT_ROOT</varname> and
      <varname>$GLOBALS['DOCUMENT_ROOT']</varname> will also exist.
     </para>
     <para>
      If you're sure register_globals = on and wonder why
      <varname>$DOCUMENT_ROOT</varname> isn't available inside functions,
      it's because these are like any other variables and would 
      require <literal>global $DOCUMENT_ROOT</literal> inside the
      function.  See also the manual page on 
      <link linkend="language.variables.scope">variable scope</link>.  It's
      preferred to code with register_globals = off.
     </para>
     
     &note.superglobals;

    </answer>
   </qandaentry>

  </qandaset>
 </chapter>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
